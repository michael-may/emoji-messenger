{"version":3,"file":"src_app_pages_home_home_module_ts.js","mappings":"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","sources":["./src/app/pages/home/home.module.ts","./src/app/pages/home/home.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { SharedModule } from '../../shared/shared.module';\r\n\r\nimport { HomePage } from './home.page';\r\n\r\n@NgModule({\r\n\timports: [\r\n\t\tCommonModule,\r\n\t\tRouterModule.forChild([\r\n\t\t\t{\r\n\t\t\t\tpath: '',\r\n\t\t\t\tcomponent: HomePage\r\n\t\t\t}\r\n\t\t]),\r\n\t\tFormsModule,\r\n\t\tSharedModule\r\n\t],\r\n\tdeclarations: [\r\n\t\tHomePage\r\n\t]\r\n})\r\nexport class HomePageModule {}\r\n","import { Component, ElementRef, ViewChild } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\nimport { IonRouterOutlet, ModalController } from '@ionic/angular';\n\nimport { Conversation, ConversationService } from '../../_core/services/conversation.service';\nimport { EncryptionKey, KeyService } from '../../_core/services/key.service';\nimport { Contact, ContactService } from '../../_core/services/contact.service';\n\nimport { ConversationAddModal } from '../../shared/modals/conversation-add/conversation-add.modal';\n\nimport { Crypto } from '../../_core/utils/crypto.utils';\nimport { MessageAddModal } from 'src/app/shared/modals/message-add/message-add.modal';\n\n@Component({\n\tselector: 'app-home',\n\ttemplateUrl: 'home.page.html',\n\tstyleUrls: ['home.page.scss'],\n})\nexport class HomePage {\n\n\tpublic contacts$: Observable<Contact[]> = this.contactService\n\t\t.contacts$\n\t\t.pipe(\n\t\t\tmap(arr => arr.sort((a, b) => a.created - b.created)),\n\t\t\ttap(contacts => this.contacts = contacts)\n\t\t);\n\n\tpublic keys$: Observable<EncryptionKey[]> = this.keyService\n\t\t.keys$\n\t\t.pipe(\n\t\t\tmap(arr => arr.sort((a, b) => a.created - b.created)),\n\t\t\ttap(keys => this.keys = keys)\n\t\t);\n\n\tpublic conversations$: Observable<Conversation[]> = this.conversationService\n\t\t.conversations$\n\t\t.pipe(\n\t\t\tmap(arr => arr.sort((a, b) => a.created - b.created))\n\t\t);\n\n\n\tprivate keys: EncryptionKey[] = [];\n\tprivate contacts: Contact[] = [];\n\n\tconstructor(\n\t\tprivate readonly keyService: KeyService,\n\t\tprivate readonly conversationService: ConversationService,\n\t\tprivate readonly contactService: ContactService,\n\t\tprivate readonly modalController: ModalController,\n\t\tprivate readonly routerOutlet: IonRouterOutlet\n\t) {}\n\n\tpublic async addConversation() {\n\t\tconst modal: HTMLIonModalElement = await this.modalController\n\t\t\t.create({\n\t\t\t\tcomponent: ConversationAddModal,\n\t\t\t\tswipeToClose: true,\n\t\t\t\tpresentingElement: this.routerOutlet.nativeEl\n\t\t\t});\n\n\t\tawait modal.present();\n\t}\n\n\tpublic async deleteConversation(id: string) {\n\t\tconst confirmed = window.confirm(`Are you absolutely sure? This is unrecoverable.`);\n\n\t\tif(confirmed) {\n\t\t\tthis.conversationService\n\t\t\t\t.deleteConversation(id);\n\t\t}\n\t}\n}\n"],"names":[],"sourceRoot":"webpack:///"}