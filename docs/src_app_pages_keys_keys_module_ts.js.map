{"version":3,"file":"src_app_pages_keys_keys_module_ts.js","mappings":"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","sources":["./src/app/pages/keys/keys.module.ts","./src/app/pages/keys/keys.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { SharedModule } from '../../shared/shared.module';\n\nimport { KeysPage } from './keys.page';\n\n@NgModule({\n\timports: [\n\t\tCommonModule,\n\t\tRouterModule.forChild([\n\t\t\t{\n\t\t\t\tpath: '',\n\t\t\t\tcomponent: KeysPage,\n\t\t\t},\n\t\t]),\n\t\tReactiveFormsModule,\n\t\tSharedModule\n\t],\n\tdeclarations: [KeysPage]\n})\nexport class KeysPageModule {}\n","import { Component, OnDestroy } from '@angular/core';\nimport { IonRouterOutlet, ModalController, ToastController } from '@ionic/angular';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { KeyAddModal } from '../../shared/modals/key-add/key-add.modal';\nimport { KeyShareModal } from '../../shared/modals/key-share/key-share.modal';\n\nimport { EncryptionKey, KeyService } from '../../_core/services/key.service';\n\n@Component({\n\tselector: 'app-keys',\n\ttemplateUrl: 'keys.page.html',\n\tstyleUrls: ['keys.page.scss'],\n})\nexport class KeysPage implements OnDestroy {\n\tpublic keys$: Observable<EncryptionKey[]> = this.keyService\n\t\t.keys$\n\t\t.pipe(\n\t\t\tmap(arr => arr.sort((a, b) => a.created - b.created))\n\t\t);\n\t\n\tconstructor(\n\t\tprivate readonly keyService: KeyService,\n\t\tprivate readonly modalController: ModalController,\n\t\tprivate readonly toastController: ToastController,\n\t\tprivate readonly routerOutlet: IonRouterOutlet\n\t) {}\n\n\tngOnDestroy() {\n\t\t\n\t}\n\n\tpublic async generateKey() {\n\t\tconst modal: HTMLIonModalElement = await this.modalController\n\t\t\t.create({\n\t\t\t\tcomponent: KeyAddModal,\n\t\t\t\tswipeToClose: true,\n\t\t\t\tpresentingElement: this.routerOutlet.nativeEl\n\t\t\t});\n\n\t\tawait modal.present();\n\t}\n\n\tpublic async unlockKey(id: string) {\n\t\tconst password = window.prompt('Enter the password for this key.');\n\t\tlet result = await this.keyService\n\t\t\t.unlockKey(id, password)\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(err);\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\tif(!result) {\n\t\t\talert(`Couldn't unlock key with the given password.`);\n\t\t}\n\t}\n\n\tpublic async showPublicKey(key: string) {\n\t\tlet clipboardErr;\n\t\tawait navigator.clipboard\n\t\t\t.writeText(key)\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(err);\n\t\t\t\tclipboardErr = err;\n\t\t\t\treturn null;\n\t\t\t});\n\t\talert(key);\n\t\tif(!clipboardErr) {\n\t\t\tconst toast = await this.toastController\n\t\t\t\t.create({\n\t\t\t\t\tmessage: 'Public key copied to clipboard.',\n\t\t\t\t\tduration: 2000\n\t\t\t\t});\n\t\t\ttoast.present();\n\t\t}\n\t}\n\n\tpublic async shareKey(key: string) {\n\t\tconst modal: HTMLIonModalElement = await this.modalController\n\t\t\t.create({\n\t\t\t\tcomponent: KeyShareModal,\n\t\t\t\tswipeToClose: true,\n\t\t\t\tpresentingElement: this.routerOutlet.nativeEl,\n\t\t\t\tcomponentProps: {\n\t\t\t\t\tkey\n\t\t\t\t}\n\t\t\t});\n\n\t\tawait modal.present();\n\t}\n\n\tpublic async deleteKey(id: string) {\n\t\tconst confirmed = window.confirm(`Are you absolutely sure? This is unrecoverable.`);\n\n\t\tif(confirmed) {\n\t\t\tthis.keyService.removeKey(id);\n\t\t}\n\t}\n}\n"],"names":[],"sourceRoot":"webpack:///"}