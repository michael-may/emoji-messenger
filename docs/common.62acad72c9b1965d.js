"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8592],{4560:(w,v,r)=>{r.r(v),r.d(v,{startFocusVisible:()=>n});const f="ion-focused",a=["Tab","ArrowDown","Space","Escape"," ","Shift","Enter","ArrowLeft","ArrowRight","ArrowUp","Home","End"],n=o=>{let u=[],d=!0;const t=o?o.shadowRoot:document,l=o||document.body,c=g=>{u.forEach(h=>h.classList.remove(f)),g.forEach(h=>h.classList.add(f)),u=g},m=()=>{d=!1,c([])},s=g=>{d=a.includes(g.key),d||c([])},i=g=>{if(d&&g.composedPath){const h=g.composedPath().filter(y=>!!y.classList&&y.classList.contains("ion-focusable"));c(h)}},p=()=>{t.activeElement===l&&c([])};return t.addEventListener("keydown",s),t.addEventListener("focusin",i),t.addEventListener("focusout",p),t.addEventListener("touchstart",m),t.addEventListener("mousedown",m),{destroy:()=>{t.removeEventListener("keydown",s),t.removeEventListener("focusin",i),t.removeEventListener("focusout",p),t.removeEventListener("touchstart",m),t.removeEventListener("mousedown",m)},setFocus:c}}},4474:(w,v,r)=>{r.d(v,{a:()=>a,b:()=>o,c:()=>u,d:()=>n,e:()=>d,f:()=>e,g:()=>f});const f="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Caret Down</title><path d='M64 144l192 224 192-224H64z'/></svg>",e="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Caret Up</title><path d='M448 368L256 144 64 368h384z'/></svg>",a="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Back</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>",n="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Down</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 184l144 144 144-144' class='ionicon-fill-none'/></svg>",o="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Forward</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",u="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Forward</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",d="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Ellipsis Horizontal</title><circle cx='256' cy='256' r='48'/><circle cx='416' cy='256' r='48'/><circle cx='96' cy='256' r='48'/></svg>"},9955:(w,v,r)=>{r.d(v,{S:()=>e});const e={bubbles:{dur:1e3,circles:9,fn:(a,n,o)=>{const u=a*n/o-a+"ms",d=2*Math.PI*n/o;return{r:5,style:{top:9*Math.sin(d)+"px",left:9*Math.cos(d)+"px","animation-delay":u}}}},circles:{dur:1e3,circles:8,fn:(a,n,o)=>{const u=n/o,d=a*u-a+"ms",t=2*Math.PI*u;return{r:5,style:{top:9*Math.sin(t)+"px",left:9*Math.cos(t)+"px","animation-delay":d}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(a,n)=>({r:6,style:{left:9-9*n+"px","animation-delay":-110*n+"ms"}})},lines:{dur:1e3,lines:8,fn:(a,n,o)=>({y1:14,y2:26,style:{transform:`rotate(${360/o*n+(n<o/2?180:-180)}deg)`,"animation-delay":a*n/o-a+"ms"}})},"lines-small":{dur:1e3,lines:8,fn:(a,n,o)=>({y1:12,y2:20,style:{transform:`rotate(${360/o*n+(n<o/2?180:-180)}deg)`,"animation-delay":a*n/o-a+"ms"}})},"lines-sharp":{dur:1e3,lines:12,fn:(a,n,o)=>({y1:17,y2:29,style:{transform:`rotate(${30*n+(n<6?180:-180)}deg)`,"animation-delay":a*n/o-a+"ms"}})},"lines-sharp-small":{dur:1e3,lines:12,fn:(a,n,o)=>({y1:12,y2:20,style:{transform:`rotate(${30*n+(n<6?180:-180)}deg)`,"animation-delay":a*n/o-a+"ms"}})}}},6817:(w,v,r)=>{r.d(v,{S:()=>c});var f=r(655),e=r(4182),a=r(872),n=r.n(a),o=r(8790),u=r(3988),d=r(4984),t=r(9863),l=r(5362);class c{constructor(s,i,p,_){this.contactService=s,this.modalController=i,this.toastController=p,this.elementRef=_,this.newContactForm=new e.cw({name:new e.NI("",[e.kI.required,e.kI.minLength(1)]),publicKey:new e.NI("",e.kI.required),file:new e.NI("")}),this.saving=!1}parseFileQR(s){var i;return(0,f.mG)(this,void 0,void 0,function*(){if(!(null===(i=s.target.files)||void 0===i?void 0:i.length))return;const p=yield u.Pp.fileToBase64(s.target.files[0]).catch(g=>(console.log(g),null));if(!p)return void(yield this.toastController.create({message:"Couldn't load file.",duration:2e3})).present();const _=yield u.Pp.base64ToImageData(p).catch(g=>(console.log(g),null));_?this.processQR(n()(_.data,_.width,_.height)):(yield this.toastController.create({message:"Couldn't load file.",duration:2e3})).present()})}processQR(s){return(0,f.mG)(this,void 0,void 0,function*(){if(null==s?void 0:s.data){const i=null==s?void 0:s.data;if(!i)return void(yield this.toastController.create({message:"Error importing QR code.",duration:2e3})).present();this.newContactForm.patchValue({publicKey:i})}else(yield this.toastController.create({message:"Invalid QR data.",duration:2e3})).present()})}scanQR(){return(0,f.mG)(this,void 0,void 0,function*(){const s=yield this.modalController.create({component:d.n,swipeToClose:!0,presentingElement:this.elementRef.nativeElement});yield s.present();const i=yield s.onDidDismiss();(null==i?void 0:i.data)&&this.processQR(i.data)})}saveContact(){return(0,f.mG)(this,void 0,void 0,function*(){if(this.saving)return;this.saving=!0;const s=this.newContactForm.get("name").value,i=this.newContactForm.get("publicKey").value,p=yield this.contactService.addContact(s,i).catch(_=>(console.log(_),null));if(this.saving=!1,!p)throw new Error("Couldn't import contact.");this.dismiss()})}dismiss(){this.modalController.dismiss()}}c.\u0275fac=function(s){return new(s||c)(t.Y36(o.yq),t.Y36(l.IN),t.Y36(l.yF),t.Y36(t.SBq))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-contact-add"]],decls:44,vars:2,consts:[["translucent","true"],["color","primary"],["slot","primary"],[3,"click"],["slot","icon-only","name","close"],[3,"formGroup"],["position","floating"],["ngDefaultControl","","formControlName","name","placeholder","Name","type","text","required",""],["name","qr-code-outline","slot","start"],["name","camera-outline","slot","start"],["name","folder-outline","slot","start"],["type","file","formControlName","file",1,"ion-hide",3,"change"],["input",""],["ngDefaultControl","","formControlName","publicKey","type","text","required",""],["expand","block",3,"disabled","click"],["name","save-outline","slot","start"]],template:function(s,i){if(1&s){const p=t.EpF();t.TgZ(0,"ion-header",0),t.TgZ(1,"ion-toolbar",1),t.TgZ(2,"ion-title"),t._uU(3," Add new Contact "),t.qZA(),t.TgZ(4,"ion-buttons",2),t.TgZ(5,"ion-button",3),t.NdJ("click",function(){return i.dismiss()}),t._UZ(6,"ion-icon",4),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"ion-content"),t.TgZ(8,"form",5),t.TgZ(9,"ion-item"),t.TgZ(10,"ion-label",6),t._uU(11," Contact Name "),t.qZA(),t._UZ(12,"ion-input",7),t.qZA(),t.TgZ(13,"ion-item"),t._UZ(14,"ion-icon",8),t.TgZ(15,"ion-label"),t._uU(16," Scan QR Code "),t.qZA(),t.TgZ(17,"ion-button",3),t.NdJ("click",function(){return i.scanQR()}),t._UZ(18,"ion-icon",9),t.TgZ(19,"ion-label"),t._uU(20,"Open Camera"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"ion-item"),t._UZ(22,"ion-icon",8),t.TgZ(23,"ion-label"),t._uU(24," QR File: "),t.qZA(),t.TgZ(25,"ion-button",3),t.NdJ("click",function(){return t.CHM(p),t.MAs(30).click()}),t._UZ(26,"ion-icon",10),t.TgZ(27,"ion-label"),t._uU(28,"Select File"),t.qZA(),t.TgZ(29,"input",11,12),t.NdJ("change",function(g){return i.parseFileQR(g)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"ion-item"),t.TgZ(32,"ion-label",6),t._uU(33,"Public Key"),t.qZA(),t._UZ(34,"ion-textarea",13),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"ion-footer"),t.TgZ(36,"ion-toolbar"),t.TgZ(37,"ion-grid"),t.TgZ(38,"ion-row"),t.TgZ(39,"ion-col"),t.TgZ(40,"ion-button",14),t.NdJ("click",function(){return i.saveContact()}),t._UZ(41,"ion-icon",15),t.TgZ(42,"ion-label"),t._uU(43,"Save"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&s&&(t.xp6(8),t.Q6J("formGroup",i.newContactForm),t.xp6(32),t.Q6J("disabled",!i.newContactForm.valid))},directives:[l.Gu,l.sr,l.wd,l.Sm,l.YG,l.gu,l.W2,e._Y,e.JL,e.sg,l.Ie,l.Q$,l.pK,l.j9,e.Fj,e.JJ,e.u,e.Q7,l.g2,l.fr,l.jY,l.Nd,l.wI],styles:[""]})},5340:(w,v,r)=>{r.d(v,{K:()=>t});var f=r(655),e=r(4182),a=r(8115),n=r(9863),o=r(5362),u=r(9808);function d(l,c){1&l&&(n.TgZ(0,"ion-item"),n.TgZ(1,"ion-label",6),n._uU(2,"Confirm Password"),n.qZA(),n._UZ(3,"ion-input",12),n.qZA())}class t{constructor(c,m){this.keyService=c,this.modalController=m,this.newKeyForm=new e.cw({name:new e.NI("",[e.kI.required,e.kI.minLength(1)]),password:new e.NI("",e.kI.minLength(6)),passwordConfirm:new e.NI("",e.kI.minLength(6))},{validators:this.passwordsMatch.bind(this)}),this.generating=!1}saveEncryptionKey(){return(0,f.mG)(this,void 0,void 0,function*(){if(this.generating)return;this.generating=!0;const c=this.newKeyForm.get("name").value,m=this.newKeyForm.get("password").value,s=yield this.keyService.generateKey(c,m).catch(i=>(console.log(i),null));if(this.generating=!1,!s)throw new Error("Couldn't generate key pair.");this.newKeyForm.setValue({name:"",password:"",passwordConfirm:""}),this.dismiss()})}dismiss(){this.modalController.dismiss()}passwordsMatch(c){const m=c.get("password"),s=c.get("passwordConfirm");return m.valid&&m.value===s.value?null:{NotEqual:!0}}}t.\u0275fac=function(c){return new(c||t)(n.Y36(a.BA),n.Y36(o.IN))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-key-add"]],decls:27,vars:3,consts:[["translucent","true"],["color","primary"],["slot","primary"],[3,"click"],["slot","icon-only","name","close"],[3,"formGroup"],["position","floating"],["ngDefaultControl","","formControlName","name","type","text","required",""],["ngDefaultControl","","formControlName","password","type","password"],[4,"ngIf"],["expand","block",3,"disabled","click"],["name","save-outline","slot","start"],["ngDefaultControl","","formControlName","passwordConfirm","type","password"]],template:function(c,m){1&c&&(n.TgZ(0,"ion-header",0),n.TgZ(1,"ion-toolbar",1),n.TgZ(2,"ion-title"),n._uU(3," Add new Encryption Key "),n.qZA(),n.TgZ(4,"ion-buttons",2),n.TgZ(5,"ion-button",3),n.NdJ("click",function(){return m.dismiss()}),n._UZ(6,"ion-icon",4),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(7,"ion-content"),n.TgZ(8,"form",5),n.TgZ(9,"ion-item"),n.TgZ(10,"ion-label",6),n._uU(11,"Name"),n.qZA(),n._UZ(12,"ion-input",7),n.qZA(),n.TgZ(13,"ion-item"),n.TgZ(14,"ion-label",6),n._uU(15,"Password"),n.qZA(),n._UZ(16,"ion-input",8),n.qZA(),n.YNc(17,d,4,0,"ion-item",9),n.qZA(),n.qZA(),n.TgZ(18,"ion-footer"),n.TgZ(19,"ion-toolbar"),n.TgZ(20,"ion-grid"),n.TgZ(21,"ion-row"),n.TgZ(22,"ion-col"),n.TgZ(23,"ion-button",10),n.NdJ("click",function(){return m.saveEncryptionKey()}),n._UZ(24,"ion-icon",11),n.TgZ(25,"ion-label"),n._uU(26,"Save"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&c&&(n.xp6(8),n.Q6J("formGroup",m.newKeyForm),n.xp6(9),n.Q6J("ngIf",(null==m.newKeyForm.get("password").value?null:m.newKeyForm.get("password").value.length)&&m.newKeyForm.get("password").valid),n.xp6(6),n.Q6J("disabled",!m.newKeyForm.valid))},directives:[o.Gu,o.sr,o.wd,o.Sm,o.YG,o.gu,o.W2,e._Y,e.JL,e.sg,o.Ie,o.Q$,o.pK,o.j9,e.Fj,e.JJ,e.u,e.Q7,u.O5,o.fr,o.jY,o.Nd,o.wI],styles:[""]})}}]);