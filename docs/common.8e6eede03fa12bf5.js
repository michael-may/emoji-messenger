"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8592],{4560:(y,v,r)=>{r.r(v),r.d(v,{startFocusVisible:()=>o});const f="ion-focused",a=["Tab","ArrowDown","Space","Escape"," ","Shift","Enter","ArrowLeft","ArrowRight","ArrowUp","Home","End"],o=n=>{let d=[],c=!0;const t=n?n.shadowRoot:document,u=n||document.body,l=_=>{d.forEach(h=>h.classList.remove(f)),_.forEach(h=>h.classList.add(f)),d=_},m=()=>{c=!1,l([])},s=_=>{c=a.includes(_.key),c||l([])},i=_=>{if(c&&_.composedPath){const h=_.composedPath().filter(w=>!!w.classList&&w.classList.contains("ion-focusable"));l(h)}},g=()=>{t.activeElement===u&&l([])};return t.addEventListener("keydown",s),t.addEventListener("focusin",i),t.addEventListener("focusout",g),t.addEventListener("touchstart",m),t.addEventListener("mousedown",m),{destroy:()=>{t.removeEventListener("keydown",s),t.removeEventListener("focusin",i),t.removeEventListener("focusout",g),t.removeEventListener("touchstart",m),t.removeEventListener("mousedown",m)},setFocus:l}}},4474:(y,v,r)=>{r.d(v,{a:()=>a,b:()=>n,c:()=>d,d:()=>o,e:()=>c,f:()=>e,g:()=>f});const f="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Caret Down</title><path d='M64 144l192 224 192-224H64z'/></svg>",e="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Caret Up</title><path d='M448 368L256 144 64 368h384z'/></svg>",a="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Back</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>",o="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Down</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 184l144 144 144-144' class='ionicon-fill-none'/></svg>",n="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Forward</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",d="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Forward</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",c="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Ellipsis Horizontal</title><circle cx='256' cy='256' r='48'/><circle cx='416' cy='256' r='48'/><circle cx='96' cy='256' r='48'/></svg>"},9955:(y,v,r)=>{r.d(v,{S:()=>e});const e={bubbles:{dur:1e3,circles:9,fn:(a,o,n)=>{const d=a*o/n-a+"ms",c=2*Math.PI*o/n;return{r:5,style:{top:9*Math.sin(c)+"px",left:9*Math.cos(c)+"px","animation-delay":d}}}},circles:{dur:1e3,circles:8,fn:(a,o,n)=>{const d=o/n,c=a*d-a+"ms",t=2*Math.PI*d;return{r:5,style:{top:9*Math.sin(t)+"px",left:9*Math.cos(t)+"px","animation-delay":c}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(a,o)=>({r:6,style:{left:9-9*o+"px","animation-delay":-110*o+"ms"}})},lines:{dur:1e3,lines:8,fn:(a,o,n)=>({y1:14,y2:26,style:{transform:`rotate(${360/n*o+(o<n/2?180:-180)}deg)`,"animation-delay":a*o/n-a+"ms"}})},"lines-small":{dur:1e3,lines:8,fn:(a,o,n)=>({y1:12,y2:20,style:{transform:`rotate(${360/n*o+(o<n/2?180:-180)}deg)`,"animation-delay":a*o/n-a+"ms"}})},"lines-sharp":{dur:1e3,lines:12,fn:(a,o,n)=>({y1:17,y2:29,style:{transform:`rotate(${30*o+(o<6?180:-180)}deg)`,"animation-delay":a*o/n-a+"ms"}})},"lines-sharp-small":{dur:1e3,lines:12,fn:(a,o,n)=>({y1:12,y2:20,style:{transform:`rotate(${30*o+(o<6?180:-180)}deg)`,"animation-delay":a*o/n-a+"ms"}})}}},6817:(y,v,r)=>{r.d(v,{S:()=>l});var f=r(655),e=r(4182),a=r(872),o=r.n(a),n=r(8790),d=r(3988),c=r(4984),t=r(2096),u=r(5362);class l{constructor(s,i,g,p){this.contactService=s,this.modalController=i,this.toastController=g,this.elementRef=p,this.newContactForm=new e.cw({name:new e.NI("",[e.kI.required,e.kI.minLength(1)]),publicKey:new e.NI("",e.kI.required),file:new e.NI("")}),this.saving=!1}parseFileQR(s){var i;return(0,f.mG)(this,void 0,void 0,function*(){if(!(null===(i=s.target.files)||void 0===i?void 0:i.length))return;const g=yield d.Pp.fileToBase64(s.target.files[0]).catch(_=>(console.log(_),null));if(!g)return void(yield this.toastController.create({message:"Couldn't load file.",duration:2e3})).present();const p=yield d.Pp.base64ToImageData(g).catch(_=>(console.log(_),null));p?this.processQR(o()(p.data,p.width,p.height)):(yield this.toastController.create({message:"Couldn't load file.",duration:2e3})).present()})}processQR(s){return(0,f.mG)(this,void 0,void 0,function*(){if(null==s?void 0:s.data){const i=null==s?void 0:s.data;if(!i)return void(yield this.toastController.create({message:"Error importing QR code.",duration:2e3})).present();console.log(i),this.newContactForm.patchValue({publicKey:i})}else(yield this.toastController.create({message:"Invalid QR data.",duration:2e3})).present()})}scanQR(){return(0,f.mG)(this,void 0,void 0,function*(){const s=yield this.modalController.create({component:c.n,swipeToClose:!0,presentingElement:this.elementRef.nativeElement});yield s.present();const i=yield s.onDidDismiss();console.log(i),(null==i?void 0:i.data)&&this.processQR(i.data)})}saveContact(){return(0,f.mG)(this,void 0,void 0,function*(){if(this.saving)return;this.saving=!0;const s=this.newContactForm.get("name").value,i=this.newContactForm.get("publicKey").value,g=yield this.contactService.addContact(s,i).catch(p=>(console.log(p),null));if(this.saving=!1,!g)throw new Error("Couldn't import contact.");this.dismiss()})}dismiss(){this.modalController.dismiss()}}l.\u0275fac=function(s){return new(s||l)(t.Y36(n.yq),t.Y36(u.IN),t.Y36(u.yF),t.Y36(t.SBq))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-contact-add"]],decls:34,vars:2,consts:[["translucent","true"],["color","primary"],["slot","primary"],[3,"click"],["slot","icon-only","name","close"],[3,"formGroup"],["position","floating"],["ngDefaultControl","","formControlName","name","placeholder","Name","type","text","required",""],["ngDefaultControl","","formControlName","publicKey","type","text","required",""],["name","qr-code-outline","slot","start"],["type","file","formControlName","file",3,"change"],["name","camera-outline","slot","start"],["expand","block",3,"disabled","click"]],template:function(s,i){1&s&&(t.TgZ(0,"ion-header",0),t.TgZ(1,"ion-toolbar",1),t.TgZ(2,"ion-title"),t._uU(3," Add new Contact "),t.qZA(),t.TgZ(4,"ion-buttons",2),t.TgZ(5,"ion-button",3),t.NdJ("click",function(){return i.dismiss()}),t._UZ(6,"ion-icon",4),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"ion-content"),t.TgZ(8,"form",5),t.TgZ(9,"ion-item"),t.TgZ(10,"ion-label",6),t._uU(11," Contact Name "),t.qZA(),t._UZ(12,"ion-input",7),t.qZA(),t.TgZ(13,"ion-item"),t.TgZ(14,"ion-label",6),t._uU(15,"Public Key"),t.qZA(),t._UZ(16,"ion-textarea",8),t.qZA(),t.TgZ(17,"ion-item"),t._UZ(18,"ion-icon",9),t.TgZ(19,"ion-label"),t._uU(20," QR File: "),t.qZA(),t.TgZ(21,"input",10),t.NdJ("change",function(p){return i.parseFileQR(p)}),t.qZA(),t.qZA(),t.TgZ(22,"ion-item"),t._UZ(23,"ion-icon",9),t.TgZ(24,"ion-label"),t._uU(25," Scan QR Code "),t.qZA(),t.TgZ(26,"ion-button",3),t.NdJ("click",function(){return i.scanQR()}),t._UZ(27,"ion-icon",11),t.TgZ(28,"ion-label"),t._uU(29,"Open Camera"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"ion-footer"),t.TgZ(31,"ion-toolbar"),t.TgZ(32,"ion-button",12),t.NdJ("click",function(){return i.saveContact()}),t._uU(33,"Save"),t.qZA(),t.qZA(),t.qZA()),2&s&&(t.xp6(8),t.Q6J("formGroup",i.newContactForm),t.xp6(24),t.Q6J("disabled",!i.newContactForm.valid))},directives:[u.Gu,u.sr,u.wd,u.Sm,u.YG,u.gu,u.W2,e._Y,e.JL,e.sg,u.Ie,u.Q$,u.pK,u.j9,e.Fj,e.JJ,e.u,e.Q7,u.g2,u.fr],styles:[""]})},5340:(y,v,r)=>{r.d(v,{K:()=>t});var f=r(655),e=r(4182),a=r(8115),o=r(2096),n=r(5362),d=r(9808);function c(u,l){1&u&&(o.TgZ(0,"ion-item"),o.TgZ(1,"ion-label",6),o._uU(2,"Confirm Password"),o.qZA(),o._UZ(3,"ion-input",11),o.qZA())}class t{constructor(l,m){this.keyService=l,this.modalController=m,this.newKeyForm=new e.cw({name:new e.NI("",[e.kI.required,e.kI.minLength(1)]),password:new e.NI("",e.kI.minLength(6)),passwordConfirm:new e.NI("",e.kI.minLength(6))},{validators:this.passwordsMatch.bind(this)}),this.generating=!1}saveEncryptionKey(){return(0,f.mG)(this,void 0,void 0,function*(){if(this.generating)return;this.generating=!0;const l=this.newKeyForm.get("name").value,m=this.newKeyForm.get("password").value,s=yield this.keyService.generateKey(l,m).catch(i=>(console.log(i),null));if(this.generating=!1,!s)throw new Error("Couldn't generate key pair.");this.newKeyForm.setValue({name:"",password:"",passwordConfirm:""}),this.dismiss()})}dismiss(){this.modalController.dismiss()}passwordsMatch(l){const m=l.get("password"),s=l.get("passwordConfirm");return m.valid&&m.value===s.value?null:{NotEqual:!0}}}t.\u0275fac=function(l){return new(l||t)(o.Y36(a.BA),o.Y36(n.IN))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-key-add"]],decls:22,vars:3,consts:[["translucent","true"],["color","primary"],["slot","primary"],[3,"click"],["slot","icon-only","name","close"],[3,"formGroup"],["position","floating"],["ngDefaultControl","","formControlName","name","type","text","required",""],["ngDefaultControl","","formControlName","password","type","password"],[4,"ngIf"],["expand","block",3,"disabled","click"],["ngDefaultControl","","formControlName","passwordConfirm","type","password"]],template:function(l,m){1&l&&(o.TgZ(0,"ion-header",0),o.TgZ(1,"ion-toolbar",1),o.TgZ(2,"ion-title"),o._uU(3," Add new Encryption Key "),o.qZA(),o.TgZ(4,"ion-buttons",2),o.TgZ(5,"ion-button",3),o.NdJ("click",function(){return m.dismiss()}),o._UZ(6,"ion-icon",4),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(7,"ion-content"),o.TgZ(8,"form",5),o.TgZ(9,"ion-item"),o.TgZ(10,"ion-label",6),o._uU(11,"Name"),o.qZA(),o._UZ(12,"ion-input",7),o.qZA(),o.TgZ(13,"ion-item"),o.TgZ(14,"ion-label",6),o._uU(15,"Password"),o.qZA(),o._UZ(16,"ion-input",8),o.qZA(),o.YNc(17,c,4,0,"ion-item",9),o.qZA(),o.qZA(),o.TgZ(18,"ion-footer"),o.TgZ(19,"ion-toolbar"),o.TgZ(20,"ion-button",10),o.NdJ("click",function(){return m.saveEncryptionKey()}),o._uU(21,"Save"),o.qZA(),o.qZA(),o.qZA()),2&l&&(o.xp6(8),o.Q6J("formGroup",m.newKeyForm),o.xp6(9),o.Q6J("ngIf",(null==m.newKeyForm.get("password").value?null:m.newKeyForm.get("password").value.length)&&m.newKeyForm.get("password").valid),o.xp6(3),o.Q6J("disabled",!m.newKeyForm.valid))},directives:[n.Gu,n.sr,n.wd,n.Sm,n.YG,n.gu,n.W2,e._Y,e.JL,e.sg,n.Ie,n.Q$,n.pK,n.j9,e.Fj,e.JJ,e.u,e.Q7,d.O5,n.fr],styles:[""]})}}]);